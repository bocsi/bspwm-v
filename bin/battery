#!/bin/bash

# Prints out battery percentage
CHARGING_ICON='^c#a7c080^'
WARNING_ICON='^c#e67e80^ '
BATTERY_FULL_ICON='^c#a7c080^'
BATTERY_2_ICON='^c#87c095^'
BATTERY_3_ICON='^c#d9bb80^'
BATTERY_4_ICON='^c#e68183^'
FULL_AT=98

BAT_ICON=""
ICON=""
BAT=$(ls /sys/class/power_supply/ | grep BAT)

get_battery()
{

	if [ -d /sys/class/power_supply/$BAT ]; then
		capacity=$(cat /sys/class/power_supply/$BAT/capacity)
		charging=$(cat /sys/class/power_supply/$BAT/status)
		if [[ "$charging" == "Charging" ]]; then
			BAT_ICON="$CHARGING_ICON"
        elif [[ $capacity -le 25 ]]; then
			ICON="$WARNING_ICON"
		elif [[ "$carging" == "Discharging" ]]; then
			ICON="$WARNING_ICON"
		elif [[ $capacity -ge $FULL_AT ]]; then
			BAT_ICON=$BATTERY_FULL_ICON
		elif [[ $capacity -le 25 ]]; then
			BAT_ICON=$BATTERY_4_ICON
		elif [[ $capacity -le 60 ]]; then
			BAT_ICON=$BATTERY_3_ICON
		elif [[ $capacity -le $FULL_AT ]]; then
			BAT_ICON=$BATTERY_2_ICON
		fi
	fi
	echo "$ICON$BAT_ICON^c#d8caac^$capacity%"
}

get_battery
