#!/bin/bash
declare -i id=5337561 # your city id. To get it: got to https://openweathermap.org/, search for your city, the last 7 digits in the link will be your city id.
api_key="c2a1840125d3bf08d86133c6ddbe0b3c" # api key from https://openweathermap.org/, you get it for free when you sign up.

icon_id=$(curl -sf "https://api.openweathermap.org/data/2.5/weather?id=$id&appid=$api_key&units=imperial" | jq -r ."weather[0]|.icon")
temp=$(curl -sf "https://api.openweathermap.org/data/2.5/weather?id=$id&appid=$api_key&units=imperial" | jq ."main.temp" | awk '{print int($1+0.5)}')
case $icon_id in
	01d) icon="%{F#e6d175} %{F-}";;
	01n) icon="%{F#d9bb80} %{F-}";;
	02d) icon="%{F#e3ebbb} %{F-}";;
	02n) icon="%{F#80cbd9} %{F-}";;
	03d) icon="%{F#bbcbeb} %{F-}";;
	03n) icon="%{F#83a4b6} %{F-}";;
	04d) icon="%{F#e3ebbb} %{F-}";;
	04n) icon="%{F#83a4b6} %{F-}";;
	09d) icon="%{F#809ed9} %{F-}";;
	09n) icon="%{F#83a4b6} %{F-}";;
	10d) icon="%{F#809ed9} %{F-}";;
	10n) icon="%{F#83a4b6} %{F-}";;
	11d) icon="%{F#f2f5fb} %{F-}";;
	11n) icon="%{F#83a4b6} %{F-}";;
	13d) icon="%{F#f2f5fb} %{F-}";;
	13n) icon="%{F#83a4b6} %{F-}";;
	50d) icon="%{F#f2f5fb} %{F-}";;
	50n) icon="%{F#83a4b6} %{F-}";;
	*) icon="$icon_id";;
esac

get_weather()
{    echo "$icon$tempF"
}
get_weather

